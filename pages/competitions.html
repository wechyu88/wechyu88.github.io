<!-- ç«èµ›æŒ‡å¯¼é¡µé¢ -->
<header class="page-header">
    <h1>ğŸ† ç«èµ›æŒ‡å¯¼</h1>
    <p>Competition Guidance</p>
</header>

<section class="content-card">
    <h2>ç«èµ›æŒ‡å¯¼ç†å¿µ</h2>
    <markdown>
æˆ‘ä¸€ç›´é‡è§†é€šè¿‡å­¦ç§‘ç«èµ›åŸ¹å…»å­¦ç”Ÿçš„**åˆ›æ–°èƒ½åŠ›**å’Œ**å®è·µèƒ½åŠ›**ã€‚é€šè¿‡æŒ‡å¯¼å­¦ç”Ÿå‚åŠ å„ç±»ç«èµ›ï¼Œä¸ä»…èƒ½å¤Ÿæå‡å­¦ç”Ÿçš„ä¸“ä¸šæŠ€èƒ½ï¼Œè¿˜èƒ½åŸ¹å…»å›¢é˜Ÿåä½œç²¾ç¥å’Œè§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚

### æŒ‡å¯¼ç‰¹è‰²
- ğŸ’¡ **åˆ›æ–°å¯¼å‘**ï¼šé¼“åŠ±å­¦ç”Ÿæå‡ºåŸåˆ›æ€§æƒ³æ³•
- ğŸ¤ **å›¢é˜Ÿåä½œ**ï¼šåŸ¹å…»å›¢é˜Ÿåˆä½œç²¾ç¥
- ğŸ¯ **å®æˆ˜æ¼”ç»ƒ**ï¼šæ³¨é‡å®é™…åº”ç”¨èƒ½åŠ›
- ğŸ“ˆ **æŒç»­è·Ÿè¸ª**ï¼šå…¨ç¨‹æŒ‡å¯¼å’Œåé¦ˆ
    </markdown>
</section>

<section class="content-card">
    <h2>ç«èµ›è·å¥–è®°å½•</h2>
    <div id="competition-list"></div>
</section>

<script>
    console.log('ğŸš€ competitions.html çš„è„šæœ¬å¼€å§‹åŠ è½½');

    // æ¸²æŸ“ç«èµ›åˆ—è¡¨ï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œé€‚é… SPA ç¯å¢ƒï¼‰
    (function renderCompetitions() {
        console.log('ğŸ”„ renderCompetitions IIFE å·²æ‰§è¡Œï¼Œå‡†å¤‡æ¸²æŸ“...');

        let rendered = false; // é˜²æ­¢é‡å¤æ¸²æŸ“

        // ä½¿ç”¨å¤šé‡ç­–ç•¥ç¡®ä¿ DOM å·²å°±ç»ª
        function attemptRender() {
            if (rendered) {
                console.log('â­ï¸ å·²ç»æ¸²æŸ“è¿‡ï¼Œè·³è¿‡');
                return;
            }

            console.log('â° å°è¯•æ¸²æŸ“ç«èµ›åˆ—è¡¨...');

            try {
                // æ£€æŸ¥ globalData æ˜¯å¦å­˜åœ¨
                console.log('ğŸ” æ£€æŸ¥ globalData:', typeof globalData);
                console.log('ğŸ” æ£€æŸ¥ globalData.competitions:', typeof globalData?.competitions);
                console.log('ğŸ” competitions æ•°ç»„é•¿åº¦:', globalData?.competitions?.length);

                if (typeof globalData === 'undefined' || !globalData.competitions) {
                    console.warn('âš ï¸ globalData æœªå°±ç»ªï¼Œç­‰å¾…ä¸‹æ¬¡å°è¯•...');
                    return; // ä¸è®¾ç½® rendered = trueï¼Œå…è®¸é‡è¯•
                }

                console.log('âœ… globalData å·²åŠ è½½ï¼Œå¼€å§‹æ¸²æŸ“ç«èµ›åˆ—è¡¨');
                const competitions = globalData.competitions;

                const listElement = document.getElementById('competition-list');
                console.log('ğŸ” æŸ¥æ‰¾ competition-list å…ƒç´ :', listElement);

                if (!listElement) {
                    console.warn('âš ï¸ competition-list å…ƒç´ æœªæ‰¾åˆ°ï¼Œç­‰å¾…ä¸‹æ¬¡å°è¯•...');
                    return; // ä¸è®¾ç½® rendered = trueï¼Œå…è®¸é‡è¯•
                }

                // ç”Ÿæˆ HTML
                const competitionHTML = competitions.map(comp => `
                    <div class="competition-item">
                        <h3>${comp.name} - ${comp.award}</h3>
                        <p class="meta">
                            <strong>æ—¶é—´ï¼š</strong>${comp.date}<br>
                            <strong>é¡¹ç›®ï¼š</strong>${comp.project}<br>
                            <strong>å­¦ç”Ÿï¼š</strong>${comp.students.join(', ')}
                        </p>
                        ${comp.description ? `<p class="description">${comp.description}</p>` : ''}
                        ${comp.images && comp.images.length > 0 ? `
                            <div class="competition-gallery">
                                ${comp.images.map(img => `
                                    <img src="${img}" alt="${comp.name}">
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `).join('');

                console.log('âœ… HTML ç”Ÿæˆå®Œæˆï¼Œé•¿åº¦:', competitionHTML.length);

                // æ¸²æŸ“åˆ° DOM
                listElement.innerHTML = competitionHTML || '<p class="empty-message">æš‚æ— ç«èµ›è®°å½•</p>';
                rendered = true; // æ ‡è®°å·²æ¸²æŸ“ï¼Œé˜²æ­¢é‡å¤
                console.log(`âœ… æˆåŠŸæ¸²æŸ“ ${competitions.length} æ¡ç«èµ›è®°å½•åˆ° DOM`);

            } catch (error) {
                console.error('âŒ æ¸²æŸ“ç«èµ›åˆ—è¡¨æ—¶å‡ºé”™:', error);
                console.error('é”™è¯¯å †æ ˆ:', error.stack);
                const listEl = document.getElementById('competition-list');
                if (listEl) {
                    listEl.innerHTML = '<p class="empty-message">æ¸²æŸ“å¤±è´¥ï¼š' + error.message + '</p>';
                    rendered = true; // å³ä½¿å‡ºé”™ä¹Ÿæ ‡è®°ä¸ºå·²å¤„ç†
                }
            }
        }

        // ç­–ç•¥1ï¼šç«‹å³å°è¯•ï¼ˆå…ƒç´ å¯èƒ½å·²ç»åœ¨ DOM ä¸­ï¼‰
        attemptRender();

        // ç­–ç•¥2ï¼šä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯å†æ¬¡å°è¯•ï¼ˆé€šå¸¸ä¼šæˆåŠŸï¼‰
        setTimeout(attemptRender, 0);

        // ç­–ç•¥3ï¼š100ms åå†æ¬¡å°è¯•ï¼ˆå…œåº•ï¼‰
        setTimeout(attemptRender, 100);

        // ç­–ç•¥4ï¼š500ms åæœ€åå°è¯•ï¼ˆç»ˆæå…œåº•ï¼‰
        setTimeout(function() {
            if (!rendered) {
                console.log('ğŸ”„ 500ms åæœ€åä¸€æ¬¡å°è¯•æ¸²æŸ“');
                attemptRender();
            }
        }, 500);

        console.log('âœ… å¤šé‡æ¸²æŸ“ç­–ç•¥å·²è®¾ç½®');
    })();

    console.log('âœ… competitions.html çš„è„šæœ¬æ‰§è¡Œå®Œæˆ');
</script>



<style>
    .competition-item {
        padding: 25px;
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        margin-bottom: 25px;
        transition: all 0.3s;
    }

    .competition-item:hover {
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        border-color: var(--primary-color);
    }

    .competition-item h3 {
        color: var(--primary-color);
        margin-bottom: 15px;
    }

    .competition-item .meta {
        color: #7f8c8d;
        line-height: 1.8;
        margin-bottom: 15px;
    }

    .description {
        margin-top: 15px;
        line-height: 1.8;
        color: #34495e;
    }

    .competition-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }

    .competition-gallery img {
        width: 100%;
        border-radius: 8px;
        transition: transform 0.3s;
    }

    .competition-gallery img:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .empty-message {
        text-align: center;
        padding: 50px 20px;
        color: #95a5a6;
        font-size: 1.1rem;
    }
</style>
