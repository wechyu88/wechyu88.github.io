# 内容管理系统（CMS）使用指南

本网站内置了一个**密码保护**的内容管理系统，只有管理员才能访问和修改内容。

## 🔑 如何打开CMS

### 方法1：快捷键（推荐）
按下：`Ctrl + Alt + A`

> **注意**：已更改为Ctrl+Alt+A，避免与浏览器快捷键冲突

### 方法2：连续点击页面标题
在任何页面上，**快速连续点击页面标题（h1或h2）3次**（1秒内）

### 方法3：双击隐藏区域
双击页面**右下角50x50像素**的透明区域

### 密码验证
无论使用哪种方式打开，都会要求输入管理员密码：
- **默认密码**：`admin123`
- **重要**：首次使用后请立即修改密码！

## 🔒 安全特性

### 密码保护
- ✅ 所有访问都需要密码验证
- ✅ 密码错误会被拒绝访问
- ✅ 密码保存在浏览器本地存储（localStorage）
- ✅ 会话期间无需重复输入（关闭浏览器后失效）

### 如何修改密码
1. 打开CMS（输入当前密码）
2. 点击右上角"⚙️ 设置"按钮
3. 在"安全设置"部分输入：
   - 当前密码
   - 新密码（至少6位）
   - 确认新密码
4. 点击"修改密码"
5. 下次访问需要使用新密码

### 忘记密码怎么办？
如果忘记密码，需要编辑 `assets/js/cms.js` 文件：
1. 找到第19行：`password: 'admin123'`
2. 将其改为你的新密码
3. 保存文件
4. 清除浏览器本地存储（或在浏览器控制台执行：`localStorage.removeItem('cms_config')`）

## ☁️ GitHub集成（推荐）

### 为什么需要GitHub集成？
- 保存到GitHub后，更改永久生效
- 可以从任何设备访问
- 不会因为清除浏览器数据而丢失
- 支持版本控制和回滚

### 配置步骤

#### 1. 创建GitHub Personal Access Token
1. 访问 [https://github.com/settings/tokens](https://github.com/settings/tokens)
2. 点击"Generate new token" → "Generate new token (classic)"
3. 设置Token名称，例如："Website CMS"
4. 勾选 **`repo`** 权限（完整仓库访问权限）
5. 点击"Generate token"
6. **立即复制Token**（只显示一次！）

#### 2. 在CMS中配置
1. 打开CMS（Ctrl+Alt+A）
2. 点击"⚙️ 设置"
3. 在"GitHub集成"部分填写：
   - **GitHub用户名**：例如 `wechyu88`
   - **仓库名**：例如 `wechyu88.github.io`
   - **Personal Access Token**：粘贴刚才复制的Token
4. 点击"保存GitHub配置"
5. 点击"测试连接"确认配置正确

#### 3. 使用
配置完成后，每次修改数据：
1. 在CMS中编辑内容
2. 点击底部"☁️ 保存到GitHub"按钮
3. 确认提交
4. 等待提示"成功保存到GitHub"

### GitHub Token安全说明
- ⚠️ Token具有完整仓库访问权限，请勿泄露
- ⚠️ 不要分享给他人
- ⚠️ 如果Token泄露，立即在GitHub上删除它
- ✅ Token保存在浏览器本地，不会上传到服务器
- ✅ 可以随时在GitHub设置中撤销Token

## 📋 CMS功能

### 1. 个人信息管理
- 编辑姓名（中英文）
- 更新职称和单位
- 修改邮箱
- 编辑个人简介

### 2. 研究方向管理
- 添加新的研究方向
- 编辑现有方向
- 删除研究方向

### 3. 研究成果管理
- **期刊论文**：添加/编辑论文信息
- **会议论文**：管理会议发表
- **专利**：记录专利信息
- **科研项目**：管理项目列表
- **获奖情况**：添加获奖记录

### 4. 教学工作管理
- 授课课程
- 编写教材
- 教学获奖

### 5. 学生指导管理
- 在读学生（博士/硕士/本科）
- 已毕业学生

### 6. 竞赛指导管理
- 添加竞赛获奖记录
- 编辑竞赛信息

## 🚀 导出功能

### 1. 时间线简历
生成按时间顺序排列的学术简历。

支持格式：
- **Markdown**（.md）：适合GitHub
- **HTML**：可打印为PDF

使用方法：
1. 打开CMS → "导出功能"标签
2. 在"时间线简历"部分选择格式
3. 点击相应按钮下载

### 2. 研究成果列表
导出所有研究成果的完整列表。

支持格式：
- **Markdown**（.md）
- **HTML**
- **BibTeX**（.bib）：用于LaTeX论文引用

### 3. 完整数据备份
导出JSON格式的完整数据备份。

## 💾 数据管理

### 保存选项

#### 1. 保存到本地（临时）
- 点击"💾 保存到本地"
- 数据保存在浏览器localStorage
- 刷新页面后仍然存在
- ⚠️ 清除浏览器数据会丢失

#### 2. 保存到GitHub（推荐）
- 点击"☁️ 保存到GitHub"
- 需要先配置GitHub信息
- 数据永久保存在GitHub仓库
- ✅ 不会丢失

#### 3. 下载备份
- 点击"📥 下载备份"
- 保存JSON文件到本地
- 可以在其他设备上导入

#### 4. 上传数据
- 点击"📤 上传数据"
- 选择之前下载的JSON文件
- 数据将被导入

### 推荐工作流程

```
编辑内容
   ↓
保存到本地（实时预览）
   ↓
下载备份（安全保障）
   ↓
保存到GitHub（永久保存）
```

## 📝 快速开始

### 第一次使用

1. **打开CMS**
   ```
   按 Ctrl + Alt + A
   输入密码：admin123
   ```

2. **修改密码**
   - 点击"⚙️ 设置"
   - 在"安全设置"中修改密码
   - 务必记住新密码！

3. **配置GitHub（可选但推荐）**
   - 创建Personal Access Token
   - 在"GitHub集成"中填写信息
   - 测试连接

4. **编辑内容**
   - 点击"个人信息"标签
   - 填写真实信息
   - 点击"保存到本地"或"保存到GitHub"

### 日常更新流程

1. 按 Ctrl+Alt+A 打开CMS
2. 输入密码
3. 选择要更新的内容类别
4. 添加/编辑条目
5. 保存到GitHub
6. （可选）下载备份

## ⚠️ 重要注意事项

### 安全
1. **修改默认密码**：首次使用后立即修改
2. **保护Token**：不要泄露GitHub Token
3. **定期备份**：每次重大更新后下载备份
4. **记住密码**：忘记密码需要修改代码文件

### 数据
1. **本地保存是临时的**：清除浏览器数据会丢失
2. **GitHub保存是永久的**：推荐使用
3. **定期下载备份**：以防万一
4. **注意数据格式**：手动编辑JSON时要小心

### 浏览器兼容性
- ✅ Chrome/Edge（推荐）
- ✅ Firefox
- ✅ Safari
- ⚠️ IE不支持

## 🔧 高级功能

### 直接编辑数据文件
如果你熟悉JSON格式，可以直接编辑 `assets/js/data.js`：

```javascript
const siteData = {
    personal: {
        name: "你的姓名",
        title: "副教授",
        email: "your-email@zjou.edu.cn",
        // ...
    },
    // ...
};
```

编辑后：
1. 保存文件
2. 提交到GitHub
3. 刷新网页查看效果

### 批量更新
对于大量数据更新：
1. 下载当前数据备份
2. 使用文本编辑器批量修改JSON
3. 在CMS中上传修改后的文件
4. 保存到GitHub

## 🆘 常见问题

### Q: 打不开CMS？
A:
- 确认快捷键是Ctrl+Alt+A（不是Ctrl+Shift+M）
- 尝试连续点击页面标题3次
- 检查浏览器控制台是否有错误

### Q: 忘记密码了？
A:
- 编辑 `assets/js/cms.js` 第19行
- 或清除localStorage：`localStorage.removeItem('cms_config')`
- 使用默认密码admin123重新登录

### Q: GitHub保存失败？
A:
- 检查Token是否有`repo`权限
- 确认用户名和仓库名正确
- 检查网络连接
- Token可能已过期，需要重新创建

### Q: 修改后网页没有变化？
A:
- 确认已保存到GitHub
- 刷新浏览器（Ctrl+F5强制刷新）
- 检查是否在正确的分支
- GitHub Pages可能需要几分钟更新

### Q: 数据会丢失吗？
A:
- 保存到本地：清除浏览器数据会丢失
- 保存到GitHub：不会丢失
- 建议：定期下载JSON备份

## 📞 技术支持

如遇到问题：
1. 检查浏览器控制台（F12）的错误信息
2. 确认数据格式是否正确
3. 尝试清除浏览器缓存后重试
4. 恢复之前的数据备份

## 🔄 更新日志

### v2.0 (2025-10-27)
- ✨ 添加密码保护功能
- ✨ 添加GitHub集成（直接保存到仓库）
- ✨ 更改快捷键为Ctrl+Alt+A（避免冲突）
- ✨ 改进触发方式（连续点击标题）
- ✨ 添加会话认证（无需重复输入密码）
- 🔒 增强安全性

### v1.0 (2025-10-27)
- ✅ 基本的内容管理功能
- ✅ 时间线简历导出
- ✅ 成果列表导出
- ✅ 数据备份和恢复

---

**重要提示**：
- 默认密码是 `admin123`
- 首次使用后**务必**修改密码
- 配置GitHub后可以直接保存到仓库
- 定期下载备份以防万一

**快捷入口**：按 `Ctrl + Alt + A` 打开CMS
